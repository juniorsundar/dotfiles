{
    "$schema": "https://opencode.ai/config.json",
    "plugin": ["opencode-gemini-auth@latest"],
    "theme": "one-dark",
    "permission": {
        "edit": "ask",
        "bash": "ask",
        "external_directory": "ask",
        "webfetch": "ask",
        "doom_loop": "ask"
    },
    "provider": {
        "ollama": {
            "npm": "@ai-sdk/openai-compatible",
            "name": "Ollama",
            "options": {
                "baseURL": "http://localhost:11434/v1"
            },
            "models": {
                "qwen3-coder-next:cloud": {
                    "name": "qwen3-coder-next:cloud"
                },
                "kimi-k2.5:cloud": {
                    "name": "kimi-k2.5:cloud"
                }
            }
        }
    },
    "agent": {
        "build": {
            "description": "Primary agent for writing code, implementing features, and making direct file modifications.",
            "mode": "primary",
            "prompt": "You are the primary execution agent. Write and modify code. For research, exploring the codebase, or reviewing safety, you MUST delegate to the appropriate subagents (@deep-research, @explore, @safety-check) rather than attempting it yourself."
        },
        "plan": {
            "description": "Primary agent for analyzing code, breaking down tasks, and orchestrating subagents without making file changes.",
            "mode": "primary",
            "prompt": "You are a master orchestrator. Break down the user's request into steps. You do not have direct file access. You MUST delegate exploration to @explore, research to @deep-research, and system design to @architect. Wait for their structured summaries before finalizing your plan.",
            "tools": {
                "write": false,
                "edit": false,
                "bash": false,
                "lsp": false
            }
        },
        "architect": {
            "description": "Primary agent for designing high-level system architecture and researching patterns.",
            "mode": "primary",
            "prompt": "You are a software architect. Plan system interactions, component structures, and high-level design patterns. Use webfetch to research best practices if needed. Do not write implementation code, but you may outline interfaces.",
            "tools": {
                "write": false,
                "edit": false,
                "bash": false,
                "lsp": false,
                "webfetch": true
            }
        },
        "deep-research": {
            "description": "Use this subagent when you need to search the web, analyze external documentation, or solve complex logic problems.",
            "mode": "subagent",
            "prompt": "You are a deep research agent. Analyze documentation and solve complex logic issues. You MUST return your findings strictly in JSON format with the following keys: 'summary' (string), 'key_findings' (array of strings), 'sources' (array of strings), and 'recommended_action' (string). Do not include greetings, explanations, or any text outside the JSON object.",
            "tools": {
                "write": false,
                "edit": false,
                "webfetch": true
            }
        },
        "safety-check": {
            "description": "Use this subagent to review written code for security vulnerabilities, memory leaks, and concurrency issues.",
            "mode": "subagent",
            "prompt": "You are a strict code reviewer. Focus on security vulnerabilities, memory leaks, and concurrency issues. Output ONLY a structured Markdown summary using exactly these headers: '### Vulnerabilities Found', '### Memory Safety Issues', '### Concurrency Risks', and '### Required Fixes'. Do not include any conversational filler.",
            "tools": {
                "write": false,
                "edit": false,
                "bash": false
            }
        },
        "explore": {
            "description": "Use this subagent when you need to trace execution flows, find file references, or map out codebase dependencies.",
            "mode": "subagent",
            "prompt": "You are a codebase explorer. Trace execution flows and analyze dependencies using grep and find. You MUST return your findings using this exact Markdown template:\n\n### Files Analyzed\n- [file paths]\n### Dependencies\n- [list of dependencies]\n### Execution Flow\n[brief step-by-step flow]\n\nDo not output any other text.",
            "tools": {
                "write": false,
                "edit": false,
                "bash": true,
                "lsp": true
            }
        },
        "document": {
            "description": "Use this subagent to generate or update inline code comments, docstrings, or README files.",
            "mode": "subagent",
            "prompt": "You are a technical documentation assistant. Read the provided code and generate clear, concise inline comments, docstrings, and README files. Explain the core logic and usage instructions. Follow standard documentation practices for the target language.",
            "tools": {
                "write": true,
                "edit": true,
                "bash": false,
                "lsp": false
            }
        },
        "quality-check": {
            "description": "Use this subagent to write unit or integration tests, execute test suites, or verify code coverage.",
            "mode": "subagent",
            "prompt": "You are a QA automation engineer. Write comprehensive unit and integration tests. Ensure code coverage is high and edge cases are handled. You can use bash to run tests and verify results.",
            "tools": {
                "write": true,
                "edit": true,
                "bash": true,
                "lsp": false
            }
        },
        "refactor": {
            "description": "Use this subagent to optimize existing code, apply design patterns, or improve readability without altering core logic.",
            "mode": "subagent",
            "prompt": "You are a code refactoring expert. Improve code quality, readability, and performance without changing behavior. strictly follow SOLID principles and design patterns. Do not change the logic.",
            "tools": {
                "write": true,
                "edit": true,
                "bash": false,
                "lsp": true
            }
        },
        "devops": {
            "description": "Use this subagent to manage containerized environments, write CI/CD pipelines, monitor logs, and automate infrastructure tasks.",
            "mode": "subagent",
            "prompt": "You are a DevOps and systems engineering assistant. Your tasks include managing Docker containers, inspecting system logs, troubleshooting infrastructure deployments, and writing CI/CD pipeline configurations. Prioritize system stability, secure configurations, and automation best practices. Output clear, actionable terminal commands or configuration files.",
            "tools": {
                "write": true,
                "edit": true,
                "bash": true,
                "lsp": false
            }
        }
    },
    "mcp": {
        "docker": {
            "type": "local",
            "command": [
                "npx",
                "-y",
                "@alisaitteke/docker-mcp"
            ]
        }
    }
}
